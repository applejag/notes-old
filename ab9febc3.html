<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>Interchanging ReadOnlySpan&lt;T&gt;, string, and char[] in C# - Wiki of Kalle</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><style type="text/css">body{background-color:#eeeeee !important;font-family:"Open Sans", serif !important}body .ui.container{font-family:"Open Sans", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Crimson Text", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .q.under > li > span.zettel-link-container span.zettel-link a{color:#808080 !important}body .q.unmatched{display:none}body div#neuron-theme-default-teal .zettel-content h1{background-color:rgba(0,181,173,0.1)}body div#neuron-theme-default-teal span.zettel-link-container span.zettel-link a{color:#00b5ad}body div#neuron-theme-default-teal span.zettel-link-container span.zettel-link a:hover{background-color:rgba(0,181,173,0.1)}body div#neuron-theme-default-teal span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-teal nav.bottomPane{background-color:rgba(0,181,173,2.0e-2)}body div#neuron-theme-default-teal div#footnotes{border-top-color:#00b5ad}body div#neuron-theme-default-brown .zettel-content h1{background-color:rgba(165,103,63,0.1)}body div#neuron-theme-default-brown span.zettel-link-container span.zettel-link a{color:#a5673f}body div#neuron-theme-default-brown span.zettel-link-container span.zettel-link a:hover{background-color:rgba(165,103,63,0.1)}body div#neuron-theme-default-brown span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-brown nav.bottomPane{background-color:rgba(165,103,63,2.0e-2)}body div#neuron-theme-default-brown div#footnotes{border-top-color:#a5673f}body div#neuron-theme-default-red .zettel-content h1{background-color:rgba(219,40,40,0.1)}body div#neuron-theme-default-red span.zettel-link-container span.zettel-link a{color:#db2828}body div#neuron-theme-default-red span.zettel-link-container span.zettel-link a:hover{background-color:rgba(219,40,40,0.1)}body div#neuron-theme-default-red span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-red nav.bottomPane{background-color:rgba(219,40,40,2.0e-2)}body div#neuron-theme-default-red div#footnotes{border-top-color:#db2828}body div#neuron-theme-default-orange .zettel-content h1{background-color:rgba(242,113,28,0.1)}body div#neuron-theme-default-orange span.zettel-link-container span.zettel-link a{color:#f2711c}body div#neuron-theme-default-orange span.zettel-link-container span.zettel-link a:hover{background-color:rgba(242,113,28,0.1)}body div#neuron-theme-default-orange span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-orange nav.bottomPane{background-color:rgba(242,113,28,2.0e-2)}body div#neuron-theme-default-orange div#footnotes{border-top-color:#f2711c}body div#neuron-theme-default-yellow .zettel-content h1{background-color:rgba(251,189,8,0.1)}body div#neuron-theme-default-yellow span.zettel-link-container span.zettel-link a{color:#fbbd08}body div#neuron-theme-default-yellow span.zettel-link-container span.zettel-link a:hover{background-color:rgba(251,189,8,0.1)}body div#neuron-theme-default-yellow span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-yellow nav.bottomPane{background-color:rgba(251,189,8,2.0e-2)}body div#neuron-theme-default-yellow div#footnotes{border-top-color:#fbbd08}body div#neuron-theme-default-olive .zettel-content h1{background-color:rgba(181,204,24,0.1)}body div#neuron-theme-default-olive span.zettel-link-container span.zettel-link a{color:#b5cc18}body div#neuron-theme-default-olive span.zettel-link-container span.zettel-link a:hover{background-color:rgba(181,204,24,0.1)}body div#neuron-theme-default-olive span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-olive nav.bottomPane{background-color:rgba(181,204,24,2.0e-2)}body div#neuron-theme-default-olive div#footnotes{border-top-color:#b5cc18}body div#neuron-theme-default-green .zettel-content h1{background-color:rgba(33,186,69,0.1)}body div#neuron-theme-default-green span.zettel-link-container span.zettel-link a{color:#21ba45}body div#neuron-theme-default-green span.zettel-link-container span.zettel-link a:hover{background-color:rgba(33,186,69,0.1)}body div#neuron-theme-default-green span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-green nav.bottomPane{background-color:rgba(33,186,69,2.0e-2)}body div#neuron-theme-default-green div#footnotes{border-top-color:#21ba45}body div#neuron-theme-default-blue .zettel-content h1{background-color:rgba(33,133,208,0.1)}body div#neuron-theme-default-blue span.zettel-link-container span.zettel-link a{color:#2185d0}body div#neuron-theme-default-blue span.zettel-link-container span.zettel-link a:hover{background-color:rgba(33,133,208,0.1)}body div#neuron-theme-default-blue span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-blue nav.bottomPane{background-color:rgba(33,133,208,2.0e-2)}body div#neuron-theme-default-blue div#footnotes{border-top-color:#2185d0}body div#neuron-theme-default-violet .zettel-content h1{background-color:rgba(100,53,201,0.1)}body div#neuron-theme-default-violet span.zettel-link-container span.zettel-link a{color:#6435c9}body div#neuron-theme-default-violet span.zettel-link-container span.zettel-link a:hover{background-color:rgba(100,53,201,0.1)}body div#neuron-theme-default-violet span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-violet nav.bottomPane{background-color:rgba(100,53,201,2.0e-2)}body div#neuron-theme-default-violet div#footnotes{border-top-color:#6435c9}body div#neuron-theme-default-purple .zettel-content h1{background-color:rgba(163,51,200,0.1)}body div#neuron-theme-default-purple span.zettel-link-container span.zettel-link a{color:#a333c8}body div#neuron-theme-default-purple span.zettel-link-container span.zettel-link a:hover{background-color:rgba(163,51,200,0.1)}body div#neuron-theme-default-purple span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-purple nav.bottomPane{background-color:rgba(163,51,200,2.0e-2)}body div#neuron-theme-default-purple div#footnotes{border-top-color:#a333c8}body div#neuron-theme-default-pink .zettel-content h1{background-color:rgba(224,57,151,0.1)}body div#neuron-theme-default-pink span.zettel-link-container span.zettel-link a{color:#e03997}body div#neuron-theme-default-pink span.zettel-link-container span.zettel-link a:hover{background-color:rgba(224,57,151,0.1)}body div#neuron-theme-default-pink span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-pink nav.bottomPane{background-color:rgba(224,57,151,2.0e-2)}body div#neuron-theme-default-pink div#footnotes{border-top-color:#e03997}body div#neuron-theme-default-grey .zettel-content h1{background-color:rgba(118,118,118,0.1)}body div#neuron-theme-default-grey span.zettel-link-container span.zettel-link a{color:#767676}body div#neuron-theme-default-grey span.zettel-link-container span.zettel-link a:hover{background-color:rgba(118,118,118,0.1)}body div#neuron-theme-default-grey span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-grey nav.bottomPane{background-color:rgba(118,118,118,2.0e-2)}body div#neuron-theme-default-grey div#footnotes{border-top-color:#767676}body div#neuron-theme-default-black .zettel-content h1{background-color:rgba(27,28,29,0.1)}body div#neuron-theme-default-black span.zettel-link-container span.zettel-link a{color:#1b1c1d}body div#neuron-theme-default-black span.zettel-link-container span.zettel-link a:hover{background-color:rgba(27,28,29,0.1)}body div#neuron-theme-default-black span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body div#neuron-theme-default-black nav.bottomPane{background-color:rgba(27,28,29,2.0e-2)}body div#neuron-theme-default-black div#footnotes{border-top-color:#1b1c1d}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f8f8f8}body div.zettel-view .zettel-content pre{padding:0.5em 0.5em 0.5em 0.5em;overflow:auto;max-width:100%}body div.zettel-view .zettel-content div.pandoc-code{margin-left:auto;margin-right:auto}body div.zettel-view .zettel-content div.pandoc-code pre{background-color:#f8f8f8}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}</style><link href="https://fonts.googleapis.com/css?family=Crimson+Text|Open+Sans|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><meta content="Kalle Jillheden" name="author" /><meta content="Most think of only using Span&lt;T&gt; and ReadOnlySpan&lt;T&gt; (in C#) in places they need ultimate performance. But there is another use case where they are offly useful. And that is when you start working with string and char[]." name="description" /><link href="https://wiki.jillejr.tech/ab9febc3.html" rel="canonical" /><meta content="Interchanging ReadOnlySpan&lt;T&gt;, string, and char[] in C#" property="og:title" /><meta content="Wiki of Kalle" property="og:site_name" /><meta content="article" property="og:type" /><script type="application/ld+json">[]</script><style type="text/css"></style><!--replace-end-7--><!--replace-end-4--><!--replace-end-1--><style type="text/css">pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style></head><body><div class="ui fluid container universe" id="neuron-theme-default-teal"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="interchanging-readonlyspant-string-and-char-in-c">Interchanging ReadOnlySpan&lt;T&gt;, string, and char[] in C#</h1><p>Most think of only using <code>Span&lt;T&gt;</code> and <code>ReadOnlySpan&lt;T&gt;</code> (in C#) in places they need ultimate performance. But there is another use case where they are offly useful. And that is when you start working with <code>string</code> and <code>char[]</code>.</p><h2 id="relying-on-readonlyspant-letting-callers-decide-types">Relying on ReadOnlySpan&lt;T&gt;, letting callers decide types</h2><p>If you make your utility methods deal with <code>ReadOnlySpan&lt;T&gt;</code> (wherever appropriate<span data-nosnippet=""><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span>) instead of <code>string</code> or <code>char[]</code>, you will only have to make slight refactorings to adjust for correct methods used. Most just include indexing and slicing, which can be done with <code>span.Slice(i, len)</code> or <code>span[a..b]</code> instead of <code>string.Substring(i, len)</code>. Other common operations such as concatenation does have proper support already throughout the .NET standard library (See: [[[b3016de3]]]).</p><p>With that you can then let the caller of the function choose between sending a range of different types, as <code>string</code>, <code>Span&lt;T&gt;</code>, and <code>char[]</code> all can be implicity casted to <code>ReadOnlySpan&lt;T&gt;</code>.</p><p>Let’s say you have the following method:</p><div class="pandoc-code highlighted"><pre><code class="cs"><span class="kw">public</span><span class=""> </span><span class="kw">class</span><span class=""> StringHelper</span>
<span class="">{</span>
<span class="">    </span><span class="co">/// </span><span class="kw">&lt;summary&gt;</span>
<span class="">    </span><span class="co">/// Example: </span><span class="kw">&lt;c&gt;</span><span class="co">&quot;john.doe&quot;</span><span class="kw">&lt;/c&gt;</span><span class="co"> as username and </span><span class="kw">&lt;c&gt;</span><span class="co">[&#39;.&#39;]</span><span class="kw">&lt;/c&gt;</span><span class="co"> as separator, gives </span><span class="kw">&lt;c&gt;</span><span class="co">&quot;doe&quot;</span><span class="kw">&lt;/c&gt;</span>
<span class="">    </span><span class="co">/// </span><span class="kw">&lt;/summary&gt;</span>
<span class="">    </span><span class="kw">public</span><span class=""> ReadOnlySpan&lt;</span><span class="dt">char</span><span class="">&gt; </span><span class="fu">GetLastSegment</span><span class="">(ReadOnlySpan&lt;</span><span class="dt">char</span><span class="">&gt; source, ReadOnlySpan&lt;</span><span class="dt">char</span><span class="">&gt; separators)</span>
<span class="">    {</span>
<span class="">        </span><span class="co">// ...</span>
<span class="">    }</span>
<span class="">}</span>
</code></pre></div><p>Now in your code production code, let’s say you may have those name name separators specified as an <code>char[]</code> because you also need it in a <code>string.Split</code> operation you’re doing later on. No worries! Just pass in that array as-is:</p><div class="pandoc-code highlighted"><pre><code class="cs"><span class="kw">public</span><span class=""> </span><span class="kw">class</span><span class=""> UsernameHelper</span>
<span class="">{</span>
<span class="">    </span><span class="kw">private</span><span class=""> </span><span class="kw">static</span><span class=""> </span><span class="kw">readonly</span><span class=""> </span><span class="dt">char</span><span class="">[] _nameSeparators = </span><span class="kw">new</span><span class=""> [] { </span><span class="ch">&#39;.&#39;</span><span class="">, </span><span class="ch">&#39;-&#39;</span><span class="">, </span><span class="ch">&#39;_&#39;</span><span class=""> };</span>

<span class="">    </span><span class="kw">public</span><span class=""> </span><span class="dt">string</span><span class=""> </span><span class="fu">GetNameSegments</span><span class="">(</span><span class="dt">string</span><span class=""> username)</span>
<span class="">    {</span>
<span class="">        </span><span class="kw">return</span><span class=""> username.</span><span class="fu">Split</span><span class="">(_nameSeparators, StringSplitOptions.</span><span class="fu">RemoveEmptyEntries</span><span class="">);</span>
<span class="">    }</span>

<span class="">    </span><span class="kw">public</span><span class=""> </span><span class="dt">string</span><span class=""> </span><span class="fu">GetLastName</span><span class="">(</span><span class="dt">string</span><span class=""> username)</span>
<span class="">    {</span>
<span class="">        </span><span class="kw">return</span><span class=""> StringHelper.</span><span class="fu">GetLastSegment</span><span class="">(username, _nameSeparators);</span>
<span class="">    }</span>
<span class="">}</span>
</code></pre></div><p>And then later in your tests, you want to declare test cases in NUnit, and you’re fully allowed to do that by representing the name separators as a string instead <em>(which is very helpful as you cannot have array constants in attributes)</em>:</p><div class="pandoc-code highlighted"><pre><code class="cs"><span class="kw">public</span><span class=""> </span><span class="kw">class</span><span class=""> StringHelperTests</span>
<span class="">{</span>
<span class="">    </span><span class="co">// You cannot have array definitions in attributes</span>
<span class="">    [</span><span class="fu">TestCase</span><span class="">(</span><span class="st">&quot;john.doe&quot;</span><span class="">, </span><span class="st">&quot;.&quot;</span><span class="">, </span><span class="st">&quot;doe&quot;</span><span class="">)]</span>
<span class="">    [</span><span class="fu">TestCase</span><span class="">(</span><span class="st">&quot;steve-smith&quot;</span><span class="">, </span><span class="st">&quot;-&quot;</span><span class="">, </span><span class="st">&quot;smith&quot;</span><span class="">)]</span>
<span class="">    [</span><span class="fu">TestCase</span><span class="">(</span><span class="st">&quot;anne-frid.von.bygel&quot;</span><span class="">, </span><span class="st">&quot;.-&quot;</span><span class="">, </span><span class="st">&quot;bygel&quot;</span><span class="">)]</span>
<span class="">    </span><span class="kw">public</span><span class=""> </span><span class="dt">void</span><span class=""> </span><span class="fu">CorrectlySplits</span><span class="">(</span><span class="dt">string</span><span class=""> input, </span><span class="dt">string</span><span class=""> separators, </span><span class="dt">string</span><span class=""> expected)</span>
<span class="">    {</span>
<span class="">        </span><span class="dt">var</span><span class=""> result = StringHelper.</span><span class="fu">GetLastSegment</span><span class="">(input, separators);</span>
<span class="">        Assert.</span><span class="fu">AreEqual</span><span class="">(expected, result);</span>
<span class="">    }</span>
<span class="">}</span>
</code></pre></div><p>No extra casting required! Perfectly fine to just feed the separators in as a string instead. Need an empty array of <code>char</code>? Just pass an empty string! They’re stored in memory in the same way, so why not take advantage of that?</p><h2 id="summary">Summary</h2><p>The <code>ReadOnlySpan&lt;T&gt;</code> type was introduced to allow for writing hyper-optimized array managing code, but the use cases does not stop there.</p><p>The biggest downside of using <code>ReadOnlySpan&lt;char&gt;</code> everywhere instead is partily because it’s a <code>ref struct</code> and has those limitations put on it, but worst (and almost silly, in a way) is that the type name is so long! It clutters the signatures of your methods enourmously, though it does go hand in hand with some clean code principles as it gives you yet another reason to make your functions smaller and take less arguments.</p><div id="footnotes"><ol><li id="fn1"><p>As you cannot have <code>ref struct</code>s in classes or records, those are inappropriate. Other examples are in asyncronous code and enumerators.</p><a href="#fnref1">↩︎</a></li></ol></div></div><div class="metadata"><div class="date" title="Zettel date"><time datetime="2021-01-15T21:38">2021-01-15</time></div></div></article><div class="ui bottom attached icon compact inverted menu teal"><!--replace-start-9--><a class="item" href="." title="Home"><i class="home icon"></i></a><!--replace-end-9--><a class="item" href="https://github.com/jilleJr/wiki/edit/main/./ab9febc3.md" title="Edit this page"><i class="edit icon"></i></a><a class="right item" href="impulse.html" title="Open Impulse"><i class="wave square icon"></i></a></div></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.5.1" /></a></div></div></div></body></html>