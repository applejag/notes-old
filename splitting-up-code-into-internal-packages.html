<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>Splitting up code into internal packages - Wiki of Kalle</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><div class="pandoc-raw-html-block"><!-- Dark theme -->
<link href="/static/dark-theme.css" rel="stylesheet">

<!-- MathJax, math rendering -->
<script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Syntax highlighting -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
<!-- End of head.html -->
</div><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><meta content="Kalle Jillheden" name="author" /><meta content="To hide some of your internal logic in Go you can use private members. But when you depend on too much internal logic, you face the difficulty of sorting through tons of private methods that don’t really have with one-another to deal with." name="description" /><link href="https://wiki.jillejr.tech/splitting-up-code-into-internal-packages.html" rel="canonical" /><meta content="Splitting up code into internal packages" property="og:title" /><meta content="Wiki of Kalle" property="og:site_name" /><meta content="article" property="og:type" /><script type="application/ld+json">[{"@context":"https://schema.org","itemListElement":[{"name":"Creating a lasting Go project","item":"https://wiki.jillejr.tech/creating-a-lasting-go-project.html","@type":"ListItem","position":1}],"@type":"BreadcrumbList"},{"@context":"https://schema.org","itemListElement":[{"name":"lang/","item":"https://wiki.jillejr.tech/lang.html","@type":"ListItem","position":1},{"name":"Go","item":"https://wiki.jillejr.tech/go.html","@type":"ListItem","position":2}],"@type":"BreadcrumbList"},{"@context":"https://schema.org","itemListElement":[{"name":"people/","item":"https://wiki.jillejr.tech/people.html","@type":"ListItem","position":1},{"name":"Rob Pike","item":"https://wiki.jillejr.tech/rob-pike.html","@type":"ListItem","position":2},{"name":"Go","item":"https://wiki.jillejr.tech/go.html","@type":"ListItem","position":3}],"@type":"BreadcrumbList"},{"@context":"https://schema.org","itemListElement":[{"name":"packages/","item":"https://wiki.jillejr.tech/packages.html","@type":"ListItem","position":1}],"@type":"BreadcrumbList"}]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(0,181,173,0.1)}body nav.bottomPane{background-color:rgba(0,181,173,2.0e-2)}body div#footnotes{border-top-color:#00b5ad}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#00b5ad;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(0,181,173,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><nav class="flipped tree deemphasized" id="zettel-uptree" style="transform-origin: 50%"><ul class="root"><li><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-01-24T14:54"><a href="go.html">Go</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-02-08T19:15"><a href="rob-pike.html">Rob Pike</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link"><a href="people.html">people/</a></span></span></div></li></ul></li><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link"><a href="lang.html">lang/</a></span></span></div></li></ul></li><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2021-01-24T12:24"><a href="creating-a-lasting-go-project.html">Creating a lasting Go project</a></span></span></div></li><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link"><a href="packages.html">packages/</a></span></span></div></li></ul></li></ul></nav><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">Splitting up code into internal packages</h1><p>To hide some of your internal logic in Go you can use private members. But when you depend on too much internal logic, you face the difficulty of sorting through tons of private methods that don’t really have with one-another to deal with.</p><p>What you can do is split up your Go package into multiple packages. Either you:</p><ul><li><p>make a sub-package, like how the <a href="https://golang.org/src/net/http/"><code>net/http</code></a> package depends on <a href="https://golang.org/src/net/http/cookiejar/"><code>net/http/cookiejar</code></a>,</p></li><li><p>or you make an internal package, like the <a href="https://golang.org/src/net/http/internal/"><code>net/http/internal</code></a> package.</p></li></ul><p>Both options of splitting up the code base is to better conform with the <em>Single Responsibility Principle (SRP)</em>, which is one of the key focus points in <span class="zettel-link-container folge"><span class="zettel-link" title="2021-01-24T12:31"><a href="what-to-focus-on-in-a-go-project.html">What to focus on in a Go project</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span>.</p><p>There’s also multiple <span class="zettel-link-container folge"><span class="zettel-link" title="2021-01-24T14:33"><a href="ways-of-importing-go-packages.html">Ways of importing Go packages</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span>, which is good to read up on to take full advantage of both your internal packages, as well as any other imported packages.</p><h2 id="magic-word-internal">Magic word: <code>internal</code></h2><p>Including the word <code>internal</code> in your package chain means it will be treated differently by the Go compiler.</p><p>It’s like a gate, where you can only access packages from the direct parents of the internal package or sub-packages of an internal package.</p><p>Example:</p><pre><code class="go language-go">package github.com/myuser/mypkg/util/internal/stringhelper</code></pre><p>The above package would be accessible by:</p><ul><li>✔ <code>github.com/myuser/mypkg/util/internal/inthelper</code></li><li>✔ <code>github.com/myuser/mypkg/util/internal/stringhelper/culture</code></li><li>✔ <code>github.com/myuser/mypkg/util/internal</code></li><li>✔ <code>github.com/myuser/mypkg/util</code></li><li>✔ <code>github.com/myuser/mypkg</code></li></ul><p>But it would not be accessible by:</p><ul><li>❌ <code>github.com/myuser/mypkg/cmd/mycmd</code></li><li>❌ <code>github.com/myuser/mypkg/internal</code></li><li>❌ <code>github.com/myuser/mypkg2</code></li></ul><h2 id="references">References</h2><ul><li>Mike Van Sickle. (2019, July 29). <em>Deep Dive into Go Packages</em> [Course]. Pluralsight. <a href="https://www.pluralsight.com/courses/go-packages-deep-dive">https://www.pluralsight.com/courses/go-packages-deep-dive</a></li></ul></div><div class="metadata"><div class="date" title="Zettel date"><time datetime="2021-01-24T14:14">2021-01-24</time></div></div></article><nav class="ui attached segment deemphasized backlinksPane"><h3 class="ui header"><span title="Backlinks from folgezettel parents">Uplinks</span></h3><ul class="backlinks"><li><span class="zettel-link-container folge"><span class="zettel-link" title="2021-01-24T14:54"><a href="go.html">Go</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span><ul class="context-list" style="zoom: 85%;"></ul></li><li><span class="zettel-link-container folge"><span class="zettel-link" title="2021-01-24T12:24"><a href="creating-a-lasting-go-project.html">Creating a lasting Go project</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span><ul class="context-list" style="zoom: 85%;"></ul></li><li><span class="zettel-link-container folge"><span class="zettel-link"><a href="packages.html">packages/</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><em>Parent directory zettel</em></div></li></ul></li></ul></nav><nav class="ui attached segment deemphasized bottomPane"><div><span class="ui basic label zettel-tag" title="Tag">go/best practices in golang</span><span class="ui basic label zettel-tag" title="Tag">go/create a lasting go project</span><span class="ui basic label zettel-tag" title="Tag">go/using packages in go</span><span class="ui basic label zettel-tag" title="Tag">go/what is the internal folder in go projects</span><span class="ui basic label zettel-tag" title="Tag">go/writing idiomatic golang code</span><span class="ui basic label zettel-tag" title="Tag">root/lang/go/packages</span></div></nav><div class="ui bottom attached icon compact inverted menu teal"><!--replace-start-9--><a class="item" href="." title="Home"><i class="home icon"></i></a><!--replace-end-9--><a class="item" href="https://github.com/jilleJr/wiki/edit/main/./lang/go/packages/splitting-up-code-into-internal-packages.md" title="Edit this page"><i class="edit icon"></i></a><a class="right item" href="impulse.html" title="Open Impulse"><i class="wave square icon"></i></a></div></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.22.2" /></a></div></div></div></body></html>